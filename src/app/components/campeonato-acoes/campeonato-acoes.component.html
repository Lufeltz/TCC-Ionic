<!-- <h3 style="display: flex; justify-content: space-between">
  <div class="icon-align">
    <ion-label> Participar</ion-label>
    <lucide-angular
      [img]="Ellipsis"
      class="btn-inscrever-se"
      [size]="20"
      [color]="'var(--yellow-desc)'"
      (click)="toggleMenu()"
    ></lucide-angular>

    
    <div [class.show]="menuVisible" class="dropdown-menu">
      <ul>
        <li (click)="sairDoCampeonato()">Sair do Campeonato</li>
        <li (click)="deletarCampeonato()">Deletar Campeonato</li>
      </ul>
    </div>
  </div>
</h3> -->

<div class="criar-post" *ngIf="campeonato?.limiteParticipantes !== 1">
  <ion-button size="small" (click)="abrirModalEditar()">
    <div class="icon-align">
      Criar Time
      <lucide-angular
        [img]="SquarePen"
        class="btn-inscrever-se"
        [size]="20"
      ></lucide-angular></div
  ></ion-button>
</div>

<div class="criar-post" *ngIf="campeonato?.limiteParticipantes === 1">
  <ion-button size="small" (click)="abrirModalEditar()">
    <!-- <ion-button size="small" (click)="criarTime()"> -->
    <div class="icon-align">
      Criar Time Individual
      <lucide-angular
        [img]="SquarePen"
        class="btn-inscrever-se"
        [size]="20"
      ></lucide-angular></div
  ></ion-button>
</div>

<h3>Limite de times: {{ times.length }} / {{ campeonato?.limiteTimes }}</h3>
<div class="card-container">
  <ul>
    <!-- Iterando sobre os times -->
    <li *ngFor="let time of times" class="card">
      <div class="card-header">
        <p class="time">{{ time.nome }}</p>
        <div class="icon-align">
          <lucide-angular
            [img]="Users"
            class="btn-inscrever-se"
            [size]="20"
            [color]="'var(--yellow-desc)'"
            (click)="toggleMenu()"
          ></lucide-angular>
          <p>
            Jogadores: {{ jogadoresPorTime[time.idTime]?.length || 0 }} /
            {{ campeonato?.limiteParticipantes }}
          </p>
        </div>
      </div>

      <ion-accordion-group>
        <ion-accordion>
          <ion-item slot="header" lines="none">
            <ion-label>Jogadores</ion-label>
          </ion-item>
          <div slot="content">
            <ul>
              <!-- Exibindo os jogadores do time -->
              <li *ngFor="let jogador of jogadoresPorTime[time.idTime]">
                <div
                  class="icon-align"
                  (click)="navegarParaPerfil(jogador.username)"
                >
                  <div>
                    <lucide-angular
                      [img]="User"
                      class="btn-inscrever-se"
                      [size]="20"
                      [color]="'var(--text-new-green)'"
                    ></lucide-angular>
                    <ion-label>{{ jogador.username }}</ion-label>
                  </div>
                  <lucide-angular
                    [img]="ExternalLink"
                    class="btn-inscrever-se"
                    [size]="20"
                    [color]="'var(--text-white)'"
                  ></lucide-angular>
                </div>
              </li>
            </ul>
            <div
              class="criar-post"
              *ngIf="
                (jogadoresPorTime[time.idTime]?.length || 0) <
                  (campeonato?.limiteParticipantes || 0) &&
                !usuarioInscritoNoCampeonato
              "
            >
              <ion-button
                size="small"
                (click)="adicionarUsuario(usuarioLogado!.idAcademico, time)"
              >
                <div class="icon-align">
                  Inscrever-se
                  <lucide-angular
                    [img]="SquarePen"
                    class="btn-inscrever-se"
                    [size]="20"
                  ></lucide-angular>
                </div>
              </ion-button>
            </div>
          </div>
        </ion-accordion>
      </ion-accordion-group>
    </li>
  </ul>
</div>

<app-modal-criar-time
  *ngIf="modalEditarVisivel"
  [idCampeonato]="idCampeonato"
  [campeonato]="campeonato"
  (close)="fecharModal()"
>
</app-modal-criar-time>
